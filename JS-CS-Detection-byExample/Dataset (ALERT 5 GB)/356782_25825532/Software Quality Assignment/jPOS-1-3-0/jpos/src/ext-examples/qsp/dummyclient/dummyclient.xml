<?xml version="1.0" ?>
<!--

  $Id$

  This QSP config starts a MUX that connects thru an ISOChannel
  to dummyserver example (that have to be running somewhere in your
  network)

    ________       ________                     ____________
   | Sender |     |        |                   |            |
   |  Task  |_____| ISOMUX |                   | ISOChannel |__>> dummyserver
   |________|     |________|\                 /|____________|
     ^                       __/ISOFilters/__/
     \__0800.xml

  It also shows how to configure a RotateLogListener
  (please change file's property value)

  example such as isoserver.xml in order to get familiar with QSP

-->

<!DOCTYPE qsp-config SYSTEM "../dtd/qsp-config.dtd"> 
<qsp-config logger="qsp" realm="qsp" reload="5000">
 <logger name="qsp">
    <log-listener class="org.jpos.util.SimpleLogListener"/>
    <log-listener class="org.jpos.util.RotateLogListener">
      <property name="file" value="/tmp/qsp.log" />
      <property name="window" value="60" />
      <property name="copies" value="10" />
    </log-listener>
 </logger>

 <!-- sequencer name="test" 
	    class="org.jpos.core.ReliableSequencer"
	    logger="qsp" realm="test.sequencer" >
  <property name="logdir" value="/tmp/test-sequencer" />
 </sequencer -->

 <sequencer name="test" 
	    class="org.jpos.core.VolatileSequencer"
	    logger="qsp" realm="test.sequencer" >
 </sequencer>

 <mux name="dummyclient.mux" 
    logger="qsp" realm="dummyclient.mux" connect="yes">
  <channel name="dummyclient.channel" 
          class="org.jpos.iso.channel.ASCIIChannel" 
          packager="org.jpos.iso.packager.ISO87APackager"
          type="client" logger="qsp" realm="dummyclient.channel"
	  connect="no" >

   <property name="host" value="localhost" />
   <property name="port" value="8000" />

   <!-- filter class="org.jpos.iso.filter.XSLTFilter" direction="outgoing">
    <property name="xsltfile" 
              value="src/ext-examples/qsp/dummyclient/outgoing.xsl" />
    <property name="reread" value="yes" />
   </filter -->
   <filter class="org.jpos.iso.filter.DelayFilter" direction="incoming">
    <property name="delay" value="1000" />
   </filter>
   <filter class="org.jpos.iso.filter.MD5Filter" direction="both">
    <property name="key" value="AnyKey" />
    <property name="fields" value="0 7 11 37 41" />
   </filter>
  </channel>
 </mux>

 <task class="org.jpos.apps.qsp.task.Sender" 
    logger="qsp" realm="sender" name="sender">
  <property name="mux" value="dummyclient.mux" />
  <property name="message" value="src/ext-examples/qsp/dummyclient/0800.xml" />
  <property name="wait-for-response" value="15000" />
  <property name="initial-delay" value="1000" />
  <property name="delay" value="10000" />
 </task>

 <!-- daily-task class="org.jpos.apps.qsp.task.Sender" 
    logger="qsp" realm="sender" 
    name="daily-sender.0" 
    poolsize="10" start="16:48" >
  <property name="mux" value="dummyclient.mux" />
  <property name="message" value="src/ext-examples/qsp/dummyclient/0800.xml" />
  <property name="wait-for-response" value="15000" />
  <property name="initial-delay" value="1000" />
  <property name="delay" value="10000" />
 </daily-task -->

</qsp-config>
