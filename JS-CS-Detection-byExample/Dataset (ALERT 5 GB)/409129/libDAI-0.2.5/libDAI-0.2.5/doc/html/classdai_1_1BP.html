<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libDAI: dai::BP Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespacedai.html">dai</a>::<a class="el" href="classdai_1_1BP.html">BP</a>
  </div>
</div>
<div class="contents">
<h1>dai::BP Class Reference</h1><!-- doxytag: class="dai::BP" --><!-- doxytag: inherits="dai::DAIAlg" -->
<p>Approximate inference algorithm "(Loopy) Belief Propagation".  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="bp_8h_source.html">dai/bp.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for dai::BP:</div>
<div class="dynsection">
 <div class="center">
  <img src="classdai_1_1BP.png" usemap="#dai::BP_map" alt=""/>
  <map id="dai::BP_map" name="dai::BP_map">
<area href="classdai_1_1DAIAlg.html" alt="dai::DAIAlg&lt; GRM &gt;" shape="rect" coords="90,56,261,80"/>
<area href="classdai_1_1InfAlg.html" alt="dai::InfAlg" shape="rect" coords="90,0,261,24"/>
<area href="classdai_1_1FBP.html" alt="dai::FBP" shape="rect" coords="0,168,171,192"/>
<area href="classdai_1_1TRWBP.html" alt="dai::TRWBP" shape="rect" coords="181,168,352,192"/>
</map>
 </div>
</div>

<p><a href="classdai_1_1BP-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdai_1_1BP_1_1EdgeProp.html">EdgeProp</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type used for storing edge properties.  <a href="structdai_1_1BP_1_1EdgeProp.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdai_1_1BP_1_1Properties.html">Properties</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parameters for <a class="el" href="classdai_1_1BP.html" title="Approximate inference algorithm &quot;(Loopy) Belief Propagation&quot;.">BP</a>.  <a href="structdai_1_1BP_1_1Properties.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Constructors/destructors</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp57646730380111ec03504277ea69145c"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a79a81420bd4370cdaad9d6a8d85c83a5">BP</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor.  <a href="#a79a81420bd4370cdaad9d6a8d85c83a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#acdfb5e4da942d55f02540d7a5fc29145">BP</a> (const <a class="el" href="classdai_1_1FactorGraph.html">FactorGraph</a> &amp;fg, const <a class="el" href="classdai_1_1PropertySet.html">PropertySet</a> &amp;opts)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct from <a class="el" href="classdai_1_1FactorGraph.html" title="Represents a factor graph.">FactorGraph</a> <em>fg</em> and <a class="el" href="classdai_1_1PropertySet.html" title="Represents a set of properties, mapping keys (of type PropertyKey) to values (of...">PropertySet</a> <em>opts</em>.  <a href="#acdfb5e4da942d55f02540d7a5fc29145"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ae8480cbb4a614119a211ffc03221ba47">BP</a> (const <a class="el" href="classdai_1_1BP.html">BP</a> &amp;x)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy constructor.  <a href="#ae8480cbb4a614119a211ffc03221ba47"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdai_1_1BP.html">BP</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#aba6124da6c2a11b01c0f66cbe8ae9562">operator=</a> (const <a class="el" href="classdai_1_1BP.html">BP</a> &amp;x)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assignment operator.  <a href="#aba6124da6c2a11b01c0f66cbe8ae9562"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">General InfAlg interface</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp1cd08b2dcefda301a4dae50ed8053e4e"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classdai_1_1BP.html">BP</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#afedbd91bf39951ac3efca096183d6b48">clone</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a pointer to a new, cloned copy of <code>*this</code> (i.e., virtual copy constructor).  <a href="#afedbd91bf39951ac3efca096183d6b48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a79d6acb552bc11638fe46dc5a6f68c4d">identify</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Identifies itself for logging purposes.  <a href="#a79d6acb552bc11638fe46dc5a6f68c4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classdai_1_1TFactor.html">Factor</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ab480cc0971e4c417867952425e28a281">belief</a> (const <a class="el" href="classdai_1_1Var.html">Var</a> &amp;v) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the (approximate) marginal probability distribution of a variable.  <a href="#ab480cc0971e4c417867952425e28a281"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classdai_1_1TFactor.html">Factor</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a6e30add24796c14c7e45adcaa7e73e62">belief</a> (const <a class="el" href="classdai_1_1VarSet.html">VarSet</a> &amp;vs) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the (approximate) marginal probability distribution of a set of variables.  <a href="#a6e30add24796c14c7e45adcaa7e73e62"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classdai_1_1TFactor.html">Factor</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#aa50b2f745fa1d796e6889f2db581a473">beliefV</a> (size_t i) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the (approximate) marginal probability distribution of the variable with index <em>i</em>.  <a href="#aa50b2f745fa1d796e6889f2db581a473"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classdai_1_1TFactor.html">Factor</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#afbb68a79c555fac628c5fb79b9c45790">beliefF</a> (size_t I) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the (approximate) marginal probability distribution of the variables on which factor <em>I</em> depends.  <a href="#afbb68a79c555fac628c5fb79b9c45790"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; <a class="el" href="classdai_1_1TFactor.html">Factor</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a9abc95e4018fa099278fcdbf8a7941b4">beliefs</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns all beliefs (approximate marginal probability distributions) calculated by the algorithm.  <a href="#a9abc95e4018fa099278fcdbf8a7941b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#aed06ca9607cb04cfeb05909366d179ce">logZ</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the logarithm of the (approximated) partition sum (normalizing constant of the factor graph).  <a href="#aed06ca9607cb04cfeb05909366d179ce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a83349319b22a2d71b1f4ef39709365f9">init</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes all data structures of the approximate inference algorithm.  <a href="#a83349319b22a2d71b1f4ef39709365f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ab711dcd5db848b6d993fac482b64ee20">init</a> (const <a class="el" href="classdai_1_1VarSet.html">VarSet</a> &amp;ns)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes all data structures corresponding to some set of variables.  <a href="#ab711dcd5db848b6d993fac482b64ee20"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f">run</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Runs the approximate inference algorithm.  <a href="#a6a47c6f0e1f4cd72a666d30f16dc217f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#aab049f83311128921465369c9ccb5971">maxDiff</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns maximum difference between single variable beliefs in the last iteration.  <a href="#aab049f83311128921465369c9ccb5971"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#abe6cbc2992d38144198c8f4ea731a26e">Iterations</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns number of iterations done (one iteration passes over the complete factorgraph).  <a href="#abe6cbc2992d38144198c8f4ea731a26e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a6a169aace3fd0538e79cef8392cfe2a4">setProperties</a> (const <a class="el" href="classdai_1_1PropertySet.html">PropertySet</a> &amp;opts)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set parameters of this inference algorithm.  <a href="#a6a169aace3fd0538e79cef8392cfe2a4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classdai_1_1PropertySet.html">PropertySet</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#add3ebd605d5052a0ffff1e29d52147b5">getProperties</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns parameters of this inference algorithm converted into a <a class="el" href="classdai_1_1PropertySet.html" title="Represents a set of properties, mapping keys (of type PropertyKey) to values (of...">PropertySet</a>.  <a href="#add3ebd605d5052a0ffff1e29d52147b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ae8fbb0248c9843f487983f319da95f2f">printProperties</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns parameters of this inference algorithm formatted as a string in the format "[key1=val1,key2=val2,...,keyn=valn]".  <a href="#ae8fbb0248c9843f487983f319da95f2f"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Additional interface specific for BP</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpec2b4ac1e48e8143fad3d94c76894226"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::size_t &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a7e204ed6336a29c95e2247217ea3b71b">findMaximum</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates the joint state of all variables that has maximum probability.  <a href="#a7e204ed6336a29c95e2247217ea3b71b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const std::vector&lt; std::pair<br class="typebreak"/>
&lt; std::size_t, std::size_t &gt; &gt; &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ac574e9480660257d127770e418cd2049">getSentMessages</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns history of which messages have been updated.  <a href="#ac574e9480660257d127770e418cd2049"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a27279d1154f031be6fcec443ecdaa49f">clearSentMessages</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clears history of which messages have been updated.  <a href="#a27279d1154f031be6fcec443ecdaa49f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdai_1_1BP_1_1Properties.html">dai::BP::Properties</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#aba42a6eb1857b7f18f5072a25800ae63">props</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parameters for <a class="el" href="classdai_1_1BP.html" title="Approximate inference algorithm &quot;(Loopy) Belief Propagation&quot;.">BP</a>.  <a href="#aba42a6eb1857b7f18f5072a25800ae63"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a18460881ce5e2a56adf0659f13339131">recordSentMessages</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Specifies whether the history of message updates should be recorded.  <a href="#a18460881ce5e2a56adf0659f13339131"></a><br/></td></tr>
<tr><td colspan="2"><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#af40ab22b371e927fd728569fdbcc607a">Name</a> = &quot;BP&quot;</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Name of this inference algorithm.  <a href="#af40ab22b371e927fd728569fdbcc607a"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; size_t &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#af206a56f36098cb72be8bdb64b48817a">ind_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type used for index cache.  <a href="#af206a56f36098cb72be8bdb64b48817a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::multimap&lt; <a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a>, <br class="typebreak"/>
std::pair&lt; std::size_t, <br class="typebreak"/>
std::size_t &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a8e3e5492d770623a7d95d0e947a4667a">LutType</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type of lookup table (only used for maximum-residual <a class="el" href="classdai_1_1BP.html" title="Approximate inference algorithm &quot;(Loopy) Belief Propagation&quot;.">BP</a>).  <a href="#a8e3e5492d770623a7d95d0e947a4667a"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classdai_1_1TProb.html">Prob</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a6bf77f5c1ff6b01161c4f7b33f926224">message</a> (size_t i, size_t _I) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns constant reference to message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>.  <a href="#a6bf77f5c1ff6b01161c4f7b33f926224"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdai_1_1TProb.html">Prob</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a77687177eb6ad06bcf6c1b41e8e8a8b0">message</a> (size_t i, size_t _I)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns reference to message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>.  <a href="#a77687177eb6ad06bcf6c1b41e8e8a8b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classdai_1_1TProb.html">Prob</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a892b640727b6f5c11289ffe924139018">newMessage</a> (size_t i, size_t _I) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns constant reference to updated message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>.  <a href="#a892b640727b6f5c11289ffe924139018"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdai_1_1TProb.html">Prob</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a1e60c0d92ca1b5268579d18a1226566e">newMessage</a> (size_t i, size_t _I)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns reference to updated message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>.  <a href="#a1e60c0d92ca1b5268579d18a1226566e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classdai_1_1BP.html#af206a56f36098cb72be8bdb64b48817a">ind_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ac6820c941ca2fa66c235f4e428c11d83">index</a> (size_t i, size_t _I) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns constant reference to cached index for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor.  <a href="#ac6820c941ca2fa66c235f4e428c11d83"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdai_1_1BP.html#af206a56f36098cb72be8bdb64b48817a">ind_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#adeb227b90cf5d400b44e6f3f86317fab">index</a> (size_t i, size_t _I)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns reference to cached index for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor.  <a href="#adeb227b90cf5d400b44e6f3f86317fab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#aea158c5753f9c2162fc49387e9613c63">residual</a> (size_t i, size_t _I) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns constant reference to residual for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor.  <a href="#aea158c5753f9c2162fc49387e9613c63"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ae45e1b8030314e89febd59009cd89252">residual</a> (size_t i, size_t _I)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns reference to residual for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor.  <a href="#ae45e1b8030314e89febd59009cd89252"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classdai_1_1TProb.html">Prob</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ac14e75635a8860dbe91600b36d1ed3fc">calcIncomingMessageProduct</a> (size_t I, bool without_i, size_t i) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate the product of factor <em>I</em> and the incoming messages.  <a href="#ac14e75635a8860dbe91600b36d1ed3fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ab3201c4c9099656bf76098cb5ecca486">calcNewMessage</a> (size_t i, size_t _I)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate the updated message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>.  <a href="#ab3201c4c9099656bf76098cb5ecca486"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a758936c7ddec33145d364b29f75eeda4">updateMessage</a> (size_t i, size_t _I)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Replace the "old" message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em> by the "new" (updated) message.  <a href="#a758936c7ddec33145d364b29f75eeda4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#aadcfd932c08690541849847e720e950f">updateResidual</a> (size_t i, size_t _I, <a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a> r)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the residual (difference between new and old message) for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor to <em>r</em>.  <a href="#aadcfd932c08690541849847e720e950f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a3a4f648b3d03bd311edb9d8b532897aa">findMaxResidual</a> (size_t &amp;i, size_t &amp;_I)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds the edge which has the maximum residual (difference between new and old message).  <a href="#a3a4f648b3d03bd311edb9d8b532897aa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ada42bd8c274d16179909327d8d062991">calcBeliefV</a> (size_t i, <a class="el" href="classdai_1_1TProb.html">Prob</a> &amp;p) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates unnormalized belief of variable <em>i</em>.  <a href="#ada42bd8c274d16179909327d8d062991"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#abd4a62c43f86f5b17c774f6a71d46950">calcBeliefF</a> (size_t I, <a class="el" href="classdai_1_1TProb.html">Prob</a> &amp;p) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates unnormalized belief of factor <em>I</em>.  <a href="#abd4a62c43f86f5b17c774f6a71d46950"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ac1ebfbe0a328c5f460ec6ce55e79b22d">construct</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helper function for constructors.  <a href="#ac1ebfbe0a328c5f460ec6ce55e79b22d"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector<br class="typebreak"/>
&lt; <a class="el" href="structdai_1_1BP_1_1EdgeProp.html">EdgeProp</a> &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#ae061035ab3cae0cea9c2dfdceb6d92f7">_edges</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores all edge properties.  <a href="#ae061035ab3cae0cea9c2dfdceb6d92f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector<br class="typebreak"/>
&lt; LutType::iterator &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#aa03dc24e2e8ba6ab12d179d9528fc594">_edge2lut</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lookup table (only used for maximum-residual <a class="el" href="classdai_1_1BP.html" title="Approximate inference algorithm &quot;(Loopy) Belief Propagation&quot;.">BP</a>).  <a href="#aa03dc24e2e8ba6ab12d179d9528fc594"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdai_1_1BP.html#a8e3e5492d770623a7d95d0e947a4667a">LutType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a9302f6004dad2004564ce594d85d2a20">_lut</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lookup table (only used for maximum-residual <a class="el" href="classdai_1_1BP.html" title="Approximate inference algorithm &quot;(Loopy) Belief Propagation&quot;.">BP</a>).  <a href="#a9302f6004dad2004564ce594d85d2a20"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a1cc44127785b369d091f9e126b4cc40e">_maxdiff</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum difference between variable beliefs encountered so far.  <a href="#a1cc44127785b369d091f9e126b4cc40e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a4fd3a6c1e6289d20d4caa5a6a575199d">_iters</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of iterations needed.  <a href="#a4fd3a6c1e6289d20d4caa5a6a575199d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair<br class="typebreak"/>
&lt; std::size_t, std::size_t &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1BP.html#a80fd16795e1ded9d09d0d164243fd6d7">_sentMessages</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The history of message updates (only recorded if <em>recordSentMessages</em> is <code>true</code>).  <a href="#a80fd16795e1ded9d09d0d164243fd6d7"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Approximate inference algorithm "(Loopy) Belief Propagation". </p>
<p>The Loopy Belief Propagation algorithm uses message passing to approximate marginal probability distributions ("beliefs") for variables and factors (more precisely, for the subset of variables depending on the factor). There are two variants, the sum-product algorithm (corresponding to finite temperature) and the max-product algorithm (corresponding to zero temperature).</p>
<p>The messages <img class="formulaInl" alt="$m_{I\to i}(x_i)$" src="form_2.png"/> are passed from factors <img class="formulaInl" alt="$I$" src="form_3.png"/> to variables <img class="formulaInl" alt="$i$" src="form_4.png"/>. In case of the sum-product algorith, the update equation is: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ m_{I\to i}(x_i) \propto \sum_{x_{N_I\setminus\{i\}}} f_I(x_I) \prod_{j\in N_I\setminus\{i\}} \prod_{J\in N_j\setminus\{I\}} m_{J\to j}\]" src="form_5.png"/>
</p>
<p> and in case of the max-product algorithm: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ m_{I\to i}(x_i) \propto \max_{x_{N_I\setminus\{i\}}} f_I(x_I) \prod_{j\in N_I\setminus\{i\}} \prod_{J\in N_j\setminus\{I\}} m_{J\to j}\]" src="form_6.png"/>
</p>
<p> In order to improve convergence, the updates can be damped. For improved numerical stability, the updates can be done in the log-domain alternatively.</p>
<p>After convergence, the variable beliefs are calculated by: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ b_i(x_i) \propto \prod_{I\in N_i} m_{I\to i}(x_i)\]" src="form_7.png"/>
</p>
<p> and the factor beliefs are calculated by: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ b_I(x_I) \propto f_I(x_I) \prod_{j\in N_I} \prod_{J\in N_j\setminus\{I\}} m_{J\to j}(x_j) \]" src="form_8.png"/>
</p>
<p> The logarithm of the partition sum is calculated by: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \log Z = \sum_i (1 - |N_i|) \sum_{x_i} b_i(x_i) \log b_i(x_i) - \sum_I \sum_{x_I} b_I(x_I) \log \frac{b_I(x_I)}{f_I(x_I)} \]" src="form_9.png"/>
</p>
<p>For the max-product algorithm, a heuristic way of finding the MAP state (the joint configuration of all variables which has maximum probability) is provided by the <a class="el" href="classdai_1_1BP.html#a7e204ed6336a29c95e2247217ea3b71b" title="Calculates the joint state of all variables that has maximum probability.">findMaximum()</a> method, which can be called after convergence.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>There are two implementations, an optimized one (the default) which caches <a class="el" href="classdai_1_1IndexFor.html" title="Tool for looping over the states of several variables.">IndexFor</a> objects, and a slower, less complicated one which is easier to maintain/understand. The slower one can be enabled by defining DAI_BP_FAST as false in the source file. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd>
<p><a class="el" href="example_8cpp-example.html#_a11">example.cpp</a>.</p>
</dd>
</dl><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="af206a56f36098cb72be8bdb64b48817a"></a><!-- doxytag: member="dai::BP::ind_t" ref="af206a56f36098cb72be8bdb64b48817a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;size_t&gt; <a class="el" href="classdai_1_1BP.html#af206a56f36098cb72be8bdb64b48817a">dai::BP::ind_t</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Type used for index cache. </p>

</div>
</div>
<a class="anchor" id="a8e3e5492d770623a7d95d0e947a4667a"></a><!-- doxytag: member="dai::BP::LutType" ref="a8e3e5492d770623a7d95d0e947a4667a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::multimap&lt;<a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a>, std::pair&lt;std::size_t, std::size_t&gt; &gt; <a class="el" href="classdai_1_1BP.html#a8e3e5492d770623a7d95d0e947a4667a">dai::BP::LutType</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Type of lookup table (only used for maximum-residual <a class="el" href="classdai_1_1BP.html" title="Approximate inference algorithm &quot;(Loopy) Belief Propagation&quot;.">BP</a>). </p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a79a81420bd4370cdaad9d6a8d85c83a5"></a><!-- doxytag: member="dai::BP::BP" ref="a79a81420bd4370cdaad9d6a8d85c83a5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dai::BP::BP </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default constructor. </p>

</div>
</div>
<a class="anchor" id="acdfb5e4da942d55f02540d7a5fc29145"></a><!-- doxytag: member="dai::BP::BP" ref="acdfb5e4da942d55f02540d7a5fc29145" args="(const FactorGraph &amp;fg, const PropertySet &amp;opts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dai::BP::BP </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1FactorGraph.html">FactorGraph</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>fg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdai_1_1PropertySet.html">PropertySet</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>opts</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Construct from <a class="el" href="classdai_1_1FactorGraph.html" title="Represents a factor graph.">FactorGraph</a> <em>fg</em> and <a class="el" href="classdai_1_1PropertySet.html" title="Represents a set of properties, mapping keys (of type PropertyKey) to values (of...">PropertySet</a> <em>opts</em>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fg</em>&nbsp;</td><td>Factor graph. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>opts</em>&nbsp;</td><td>Parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structdai_1_1BP_1_1Properties.html" title="Parameters for BP.">Properties</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ae8480cbb4a614119a211ffc03221ba47"></a><!-- doxytag: member="dai::BP::BP" ref="ae8480cbb4a614119a211ffc03221ba47" args="(const BP &amp;x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dai::BP::BP </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1BP.html">BP</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>x</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Copy constructor. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aba6124da6c2a11b01c0f66cbe8ae9562"></a><!-- doxytag: member="dai::BP::operator=" ref="aba6124da6c2a11b01c0f66cbe8ae9562" args="(const BP &amp;x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1BP.html">BP</a>&amp; dai::BP::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1BP.html">BP</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>x</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Assignment operator. </p>

</div>
</div>
<a class="anchor" id="afedbd91bf39951ac3efca096183d6b48"></a><!-- doxytag: member="dai::BP::clone" ref="afedbd91bf39951ac3efca096183d6b48" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classdai_1_1BP.html">BP</a>* dai::BP::clone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a pointer to a new, cloned copy of <code>*this</code> (i.e., virtual copy constructor). </p>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#a28fd90657745e2a150f94d22319c6e2d">dai::InfAlg</a>.</p>

<p>Reimplemented in <a class="el" href="classdai_1_1FBP.html#abb6ebc2034c2aa4b273e14cdbe6f8ae1">dai::FBP</a>, and <a class="el" href="classdai_1_1TRWBP.html#a5952bd4e8d7a02abbbe06bef5f2f51e0">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="a79d6acb552bc11638fe46dc5a6f68c4d"></a><!-- doxytag: member="dai::BP::identify" ref="a79d6acb552bc11638fe46dc5a6f68c4d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string dai::BP::identify </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Identifies itself for logging purposes. </p>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#a2f84c282ef54ab76e70fba6f823f2b27">dai::InfAlg</a>.</p>

<p>Reimplemented in <a class="el" href="classdai_1_1FBP.html#aa12cf868f78febd830dfd828538a562f">dai::FBP</a>, and <a class="el" href="classdai_1_1TRWBP.html#a9840aeff97dff2a6a5107b9f8d63d0eb">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="ab480cc0971e4c417867952425e28a281"></a><!-- doxytag: member="dai::BP::belief" ref="ab480cc0971e4c417867952425e28a281" args="(const Var &amp;v) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classdai_1_1TFactor.html">Factor</a> dai::BP::belief </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1Var.html">Var</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the (approximate) marginal probability distribution of a variable. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Before this method is called, <a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f" title="Runs the approximate inference algorithm.">run()</a> should have been called. </dd></dl>

<p>Reimplemented from <a class="el" href="classdai_1_1InfAlg.html#a3afe96990b767effef2e2a857b74dee0">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="a6e30add24796c14c7e45adcaa7e73e62"></a><!-- doxytag: member="dai::BP::belief" ref="a6e30add24796c14c7e45adcaa7e73e62" args="(const VarSet &amp;vs) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1TFactor.html">Factor</a> dai::BP::belief </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1VarSet.html">VarSet</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the (approximate) marginal probability distribution of a set of variables. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Before this method is called, <a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f" title="Runs the approximate inference algorithm.">run()</a> should have been called. </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NOT_IMPLEMENTED</em>&nbsp;</td><td>if not implemented/supported. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BELIEF_NOT_AVAILABLE</em>&nbsp;</td><td>if the requested belief cannot be calculated with this algorithm. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#a4655db9d766470f1a555cba7d3ec7190">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="aa50b2f745fa1d796e6889f2db581a473"></a><!-- doxytag: member="dai::BP::beliefV" ref="aa50b2f745fa1d796e6889f2db581a473" args="(size_t i) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1TFactor.html">Factor</a> dai::BP::beliefV </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the (approximate) marginal probability distribution of the variable with index <em>i</em>. </p>
<p>For some approximate inference algorithms, using <a class="el" href="classdai_1_1BP.html#aa50b2f745fa1d796e6889f2db581a473" title="Returns the (approximate) marginal probability distribution of the variable with...">beliefV()</a> is preferred to <a class="el" href="classdai_1_1BP.html#ab480cc0971e4c417867952425e28a281" title="Returns the (approximate) marginal probability distribution of a variable.">belief()</a> for performance reasons. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Before this method is called, <a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f" title="Runs the approximate inference algorithm.">run()</a> should have been called. </dd></dl>

<p>Reimplemented from <a class="el" href="classdai_1_1InfAlg.html#adcca5c7e5971d946198feb1a7c85db1c">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="afbb68a79c555fac628c5fb79b9c45790"></a><!-- doxytag: member="dai::BP::beliefF" ref="afbb68a79c555fac628c5fb79b9c45790" args="(size_t I) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1TFactor.html">Factor</a> dai::BP::beliefF </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>I</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the (approximate) marginal probability distribution of the variables on which factor <em>I</em> depends. </p>
<p>For some approximate inference algorithms, using <a class="el" href="classdai_1_1BP.html#afbb68a79c555fac628c5fb79b9c45790" title="Returns the (approximate) marginal probability distribution of the variables on which...">beliefF()</a> is preferred to <a class="el" href="classdai_1_1BP.html#ab480cc0971e4c417867952425e28a281" title="Returns the (approximate) marginal probability distribution of a variable.">belief()</a> for performance reasons. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Before this method is called, <a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f" title="Runs the approximate inference algorithm.">run()</a> should have been called. </dd></dl>

<p>Reimplemented from <a class="el" href="classdai_1_1InfAlg.html#a8fe868878629c3ad3cbb02e3d5c1a896">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="a9abc95e4018fa099278fcdbf8a7941b4"></a><!-- doxytag: member="dai::BP::beliefs" ref="a9abc95e4018fa099278fcdbf8a7941b4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; <a class="el" href="classdai_1_1TFactor.html">Factor</a> &gt; dai::BP::beliefs </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns all beliefs (approximate marginal probability distributions) calculated by the algorithm. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Before this method is called, <a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f" title="Runs the approximate inference algorithm.">run()</a> should have been called. </dd></dl>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#aeac9f6b52ff7a11a1e5ac2c03bbd6eb0">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="aed06ca9607cb04cfeb05909366d179ce"></a><!-- doxytag: member="dai::BP::logZ" ref="aed06ca9607cb04cfeb05909366d179ce" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a> dai::BP::logZ </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the logarithm of the (approximated) partition sum (normalizing constant of the factor graph). </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Before this method is called, <a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f" title="Runs the approximate inference algorithm.">run()</a> should have been called. </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NOT_IMPLEMENTED</em>&nbsp;</td><td>if not implemented/supported </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#a40a2353d63c358ebca834d40b0a4fc70">dai::InfAlg</a>.</p>

<p>Reimplemented in <a class="el" href="classdai_1_1FBP.html#ae0615b84ba702460a58650d692db31c9">dai::FBP</a>, and <a class="el" href="classdai_1_1TRWBP.html#a02ae0092ce79546395d2500667437dd1">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="a83349319b22a2d71b1f4ef39709365f9"></a><!-- doxytag: member="dai::BP::init" ref="a83349319b22a2d71b1f4ef39709365f9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes all data structures of the approximate inference algorithm. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This method should be called at least once before <a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f" title="Runs the approximate inference algorithm.">run()</a> is called. </dd></dl>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#a99dd53d1aaccf09a4b977a49a983cc85">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="ab711dcd5db848b6d993fac482b64ee20"></a><!-- doxytag: member="dai::BP::init" ref="ab711dcd5db848b6d993fac482b64ee20" args="(const VarSet &amp;ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1VarSet.html">VarSet</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes all data structures corresponding to some set of variables. </p>
<p>This method can be used to do a partial initialization after a part of the factor graph has changed. Instead of initializing all data structures, it only initializes those involving the variables in <em>vs</em>. </p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NOT_IMPLEMENTED</em>&nbsp;</td><td>if not implemented/supported </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#a5b1e6d8af207bcc47fd954fdef382a77">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="a6a47c6f0e1f4cd72a666d30f16dc217f"></a><!-- doxytag: member="dai::BP::run" ref="a6a47c6f0e1f4cd72a666d30f16dc217f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a> dai::BP::run </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Runs the approximate inference algorithm. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Before <a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f" title="Runs the approximate inference algorithm.">run()</a> is called the first time, <a class="el" href="classdai_1_1BP.html#a83349319b22a2d71b1f4ef39709365f9" title="Initializes all data structures of the approximate inference algorithm.">init()</a> should have been called. </dd></dl>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#a4ac173c4d4109fd1e2229dd83532d32f">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="aab049f83311128921465369c9ccb5971"></a><!-- doxytag: member="dai::BP::maxDiff" ref="aab049f83311128921465369c9ccb5971" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a> dai::BP::maxDiff </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns maximum difference between single variable beliefs in the last iteration. </p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NOT_IMPLEMENTED</em>&nbsp;</td><td>if not implemented/supported </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#adf10bf72f1d0f2ac87841c88ba4a3b61">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="abe6cbc2992d38144198c8f4ea731a26e"></a><!-- doxytag: member="dai::BP::Iterations" ref="abe6cbc2992d38144198c8f4ea731a26e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual size_t dai::BP::Iterations </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns number of iterations done (one iteration passes over the complete factorgraph). </p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>NOT_IMPLEMENTED</em>&nbsp;</td><td>if not implemented/supported </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#a7a93807863cc0a2025c1a78bdf1e14b8">dai::InfAlg</a>.</p>

</div>
</div>
<a class="anchor" id="a6a169aace3fd0538e79cef8392cfe2a4"></a><!-- doxytag: member="dai::BP::setProperties" ref="a6a169aace3fd0538e79cef8392cfe2a4" args="(const PropertySet &amp;opts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::setProperties </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1PropertySet.html">PropertySet</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>opts</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set parameters of this inference algorithm. </p>
<p>The parameters are set according to the <a class="el" href="classdai_1_1PropertySet.html" title="Represents a set of properties, mapping keys (of type PropertyKey) to values (of...">PropertySet</a> <em>opts</em>. The values can be stored either as std::string or as the type of the corresponding <a class="el" href="classdai_1_1MF.html#a7fe9b554132a55d416199fcea7da014c" title="Parameters for MF.">MF::props</a> member. </p>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#ac422893fd7b8e37f914860aeba9602dc">dai::InfAlg</a>.</p>

<p>Reimplemented in <a class="el" href="classdai_1_1TRWBP.html#a2aeaf6c4106d09935a038895d9563bc9">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="add3ebd605d5052a0ffff1e29d52147b5"></a><!-- doxytag: member="dai::BP::getProperties" ref="add3ebd605d5052a0ffff1e29d52147b5" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1PropertySet.html">PropertySet</a> dai::BP::getProperties </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns parameters of this inference algorithm converted into a <a class="el" href="classdai_1_1PropertySet.html" title="Represents a set of properties, mapping keys (of type PropertyKey) to values (of...">PropertySet</a>. </p>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#aba3b821f6ed47b91ef4080b03c14220e">dai::InfAlg</a>.</p>

<p>Reimplemented in <a class="el" href="classdai_1_1TRWBP.html#a3f11629b265799e0da503dac55c1c223">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="ae8fbb0248c9843f487983f319da95f2f"></a><!-- doxytag: member="dai::BP::printProperties" ref="ae8fbb0248c9843f487983f319da95f2f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string dai::BP::printProperties </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns parameters of this inference algorithm formatted as a string in the format "[key1=val1,key2=val2,...,keyn=valn]". </p>

<p>Implements <a class="el" href="classdai_1_1InfAlg.html#a9cc7a50cbbe8825a334b16e41c92f019">dai::InfAlg</a>.</p>

<p>Reimplemented in <a class="el" href="classdai_1_1TRWBP.html#a2b4ec5c8335efcd4e7e7fd1f3aa68190">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="a7e204ed6336a29c95e2247217ea3b71b"></a><!-- doxytag: member="dai::BP::findMaximum" ref="a7e204ed6336a29c95e2247217ea3b71b" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; size_t &gt; dai::BP::findMaximum </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates the joint state of all variables that has maximum probability. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Assumes that <a class="el" href="classdai_1_1BP.html#a6a47c6f0e1f4cd72a666d30f16dc217f" title="Runs the approximate inference algorithm.">run()</a> has been called and that <em>props.inference</em> == <code>MAXPROD</code> </dd></dl>

</div>
</div>
<a class="anchor" id="ac574e9480660257d127770e418cd2049"></a><!-- doxytag: member="dai::BP::getSentMessages" ref="ac574e9480660257d127770e418cd2049" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;std::pair&lt;std::size_t, std::size_t&gt; &gt;&amp; dai::BP::getSentMessages </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns history of which messages have been updated. </p>

</div>
</div>
<a class="anchor" id="a27279d1154f031be6fcec443ecdaa49f"></a><!-- doxytag: member="dai::BP::clearSentMessages" ref="a27279d1154f031be6fcec443ecdaa49f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::clearSentMessages </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Clears history of which messages have been updated. </p>

</div>
</div>
<a class="anchor" id="a6bf77f5c1ff6b01161c4f7b33f926224"></a><!-- doxytag: member="dai::BP::message" ref="a6bf77f5c1ff6b01161c4f7b33f926224" args="(size_t i, size_t _I) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classdai_1_1TProb.html">Prob</a>&amp; dai::BP::message </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns constant reference to message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>. </p>

</div>
</div>
<a class="anchor" id="a77687177eb6ad06bcf6c1b41e8e8a8b0"></a><!-- doxytag: member="dai::BP::message" ref="a77687177eb6ad06bcf6c1b41e8e8a8b0" args="(size_t i, size_t _I)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1TProb.html">Prob</a>&amp; dai::BP::message </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns reference to message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>. </p>

</div>
</div>
<a class="anchor" id="a892b640727b6f5c11289ffe924139018"></a><!-- doxytag: member="dai::BP::newMessage" ref="a892b640727b6f5c11289ffe924139018" args="(size_t i, size_t _I) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classdai_1_1TProb.html">Prob</a>&amp; dai::BP::newMessage </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns constant reference to updated message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>. </p>

</div>
</div>
<a class="anchor" id="a1e60c0d92ca1b5268579d18a1226566e"></a><!-- doxytag: member="dai::BP::newMessage" ref="a1e60c0d92ca1b5268579d18a1226566e" args="(size_t i, size_t _I)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1TProb.html">Prob</a>&amp; dai::BP::newMessage </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns reference to updated message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>. </p>

</div>
</div>
<a class="anchor" id="ac6820c941ca2fa66c235f4e428c11d83"></a><!-- doxytag: member="dai::BP::index" ref="ac6820c941ca2fa66c235f4e428c11d83" args="(size_t i, size_t _I) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classdai_1_1BP.html#af206a56f36098cb72be8bdb64b48817a">ind_t</a>&amp; dai::BP::index </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns constant reference to cached index for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor. </p>

</div>
</div>
<a class="anchor" id="adeb227b90cf5d400b44e6f3f86317fab"></a><!-- doxytag: member="dai::BP::index" ref="adeb227b90cf5d400b44e6f3f86317fab" args="(size_t i, size_t _I)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1BP.html#af206a56f36098cb72be8bdb64b48817a">ind_t</a>&amp; dai::BP::index </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns reference to cached index for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor. </p>

</div>
</div>
<a class="anchor" id="aea158c5753f9c2162fc49387e9613c63"></a><!-- doxytag: member="dai::BP::residual" ref="aea158c5753f9c2162fc49387e9613c63" args="(size_t i, size_t _I) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a>&amp; dai::BP::residual </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns constant reference to residual for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor. </p>

</div>
</div>
<a class="anchor" id="ae45e1b8030314e89febd59009cd89252"></a><!-- doxytag: member="dai::BP::residual" ref="ae45e1b8030314e89febd59009cd89252" args="(size_t i, size_t _I)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a>&amp; dai::BP::residual </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns reference to residual for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor. </p>

</div>
</div>
<a class="anchor" id="ac14e75635a8860dbe91600b36d1ed3fc"></a><!-- doxytag: member="dai::BP::calcIncomingMessageProduct" ref="ac14e75635a8860dbe91600b36d1ed3fc" args="(size_t I, bool without_i, size_t i) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1TProb.html">Prob</a> dai::BP::calcIncomingMessageProduct </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>without_i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate the product of factor <em>I</em> and the incoming messages. </p>
<p>If <em>without_i</em> == <code>true</code>, the message coming from variable <em>i</em> is omitted from the product </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This function is used by <a class="el" href="classdai_1_1BP.html#ab3201c4c9099656bf76098cb5ecca486" title="Calculate the updated message from the _I &#39;th neighbor of variable i to variable...">calcNewMessage()</a> and <a class="el" href="classdai_1_1BP.html#abd4a62c43f86f5b17c774f6a71d46950" title="Calculates unnormalized belief of factor I.">calcBeliefF()</a> </dd></dl>

<p>Reimplemented in <a class="el" href="classdai_1_1FBP.html#a6a745a04febcb028a872bd927afc835e">dai::FBP</a>, and <a class="el" href="classdai_1_1TRWBP.html#aaa99b49cb48ced8dcf2d7f41d388731f">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="ab3201c4c9099656bf76098cb5ecca486"></a><!-- doxytag: member="dai::BP::calcNewMessage" ref="ab3201c4c9099656bf76098cb5ecca486" args="(size_t i, size_t _I)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::calcNewMessage </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate the updated message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em>. </p>

<p>Reimplemented in <a class="el" href="classdai_1_1FBP.html#acb78219ff88ff5eabd68583175ab09d8">dai::FBP</a>.</p>

</div>
</div>
<a class="anchor" id="a758936c7ddec33145d364b29f75eeda4"></a><!-- doxytag: member="dai::BP::updateMessage" ref="a758936c7ddec33145d364b29f75eeda4" args="(size_t i, size_t _I)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::updateMessage </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Replace the "old" message from the <em>_I</em> 'th neighbor of variable <em>i</em> to variable <em>i</em> by the "new" (updated) message. </p>

</div>
</div>
<a class="anchor" id="aadcfd932c08690541849847e720e950f"></a><!-- doxytag: member="dai::BP::updateResidual" ref="aadcfd932c08690541849847e720e950f" args="(size_t i, size_t _I, Real r)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::updateResidual </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>_I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td>
          <td class="paramname"> <em>r</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the residual (difference between new and old message) for the edge between variable <em>i</em> and its <em>_I</em> 'th neighbor to <em>r</em>. </p>

</div>
</div>
<a class="anchor" id="a3a4f648b3d03bd311edb9d8b532897aa"></a><!-- doxytag: member="dai::BP::findMaxResidual" ref="a3a4f648b3d03bd311edb9d8b532897aa" args="(size_t &amp;i, size_t &amp;_I)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::findMaxResidual </td>
          <td>(</td>
          <td class="paramtype">size_t &amp;&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&nbsp;</td>
          <td class="paramname"> <em>_I</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds the edge which has the maximum residual (difference between new and old message). </p>

</div>
</div>
<a class="anchor" id="ada42bd8c274d16179909327d8d062991"></a><!-- doxytag: member="dai::BP::calcBeliefV" ref="ada42bd8c274d16179909327d8d062991" args="(size_t i, Prob &amp;p) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::calcBeliefV </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdai_1_1TProb.html">Prob</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates unnormalized belief of variable <em>i</em>. </p>

<p>Reimplemented in <a class="el" href="classdai_1_1TRWBP.html#a3dc75e63b05b1186858ba6825d3a2a4a">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="abd4a62c43f86f5b17c774f6a71d46950"></a><!-- doxytag: member="dai::BP::calcBeliefF" ref="abd4a62c43f86f5b17c774f6a71d46950" args="(size_t I, Prob &amp;p) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void dai::BP::calcBeliefF </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdai_1_1TProb.html">Prob</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates unnormalized belief of factor <em>I</em>. </p>

<p>Reimplemented in <a class="el" href="classdai_1_1FBP.html#ae678616088bb43db04d4ba44c8d52f38">dai::FBP</a>, and <a class="el" href="classdai_1_1TRWBP.html#a21deaa91800f5ff86df64e0030057563">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="ac1ebfbe0a328c5f460ec6ce55e79b22d"></a><!-- doxytag: member="dai::BP::construct" ref="ac1ebfbe0a328c5f460ec6ce55e79b22d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::BP::construct </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Helper function for constructors. </p>

<p>Reimplemented in <a class="el" href="classdai_1_1FBP.html#a854db7b2ada840026a17b837ca9897f1">dai::FBP</a>, and <a class="el" href="classdai_1_1TRWBP.html#acb2edaf2a224aa7643932878fe54699c">dai::TRWBP</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ae061035ab3cae0cea9c2dfdceb6d92f7"></a><!-- doxytag: member="dai::BP::_edges" ref="ae061035ab3cae0cea9c2dfdceb6d92f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;<a class="el" href="structdai_1_1BP_1_1EdgeProp.html">EdgeProp</a>&gt; &gt; <a class="el" href="classdai_1_1BP.html#ae061035ab3cae0cea9c2dfdceb6d92f7">dai::BP::_edges</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores all edge properties. </p>

</div>
</div>
<a class="anchor" id="aa03dc24e2e8ba6ab12d179d9528fc594"></a><!-- doxytag: member="dai::BP::_edge2lut" ref="aa03dc24e2e8ba6ab12d179d9528fc594" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;LutType::iterator&gt; &gt; <a class="el" href="classdai_1_1BP.html#aa03dc24e2e8ba6ab12d179d9528fc594">dai::BP::_edge2lut</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lookup table (only used for maximum-residual <a class="el" href="classdai_1_1BP.html" title="Approximate inference algorithm &quot;(Loopy) Belief Propagation&quot;.">BP</a>). </p>

</div>
</div>
<a class="anchor" id="a9302f6004dad2004564ce594d85d2a20"></a><!-- doxytag: member="dai::BP::_lut" ref="a9302f6004dad2004564ce594d85d2a20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1BP.html#a8e3e5492d770623a7d95d0e947a4667a">LutType</a> <a class="el" href="classdai_1_1BP.html#a9302f6004dad2004564ce594d85d2a20">dai::BP::_lut</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lookup table (only used for maximum-residual <a class="el" href="classdai_1_1BP.html" title="Approximate inference algorithm &quot;(Loopy) Belief Propagation&quot;.">BP</a>). </p>

</div>
</div>
<a class="anchor" id="a1cc44127785b369d091f9e126b4cc40e"></a><!-- doxytag: member="dai::BP::_maxdiff" ref="a1cc44127785b369d091f9e126b4cc40e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedai.html#ae7d0472fdc89a8635825d01940e91cbf">Real</a> <a class="el" href="classdai_1_1BP.html#a1cc44127785b369d091f9e126b4cc40e">dai::BP::_maxdiff</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Maximum difference between variable beliefs encountered so far. </p>

</div>
</div>
<a class="anchor" id="a4fd3a6c1e6289d20d4caa5a6a575199d"></a><!-- doxytag: member="dai::BP::_iters" ref="a4fd3a6c1e6289d20d4caa5a6a575199d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classdai_1_1BP.html#a4fd3a6c1e6289d20d4caa5a6a575199d">dai::BP::_iters</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of iterations needed. </p>

</div>
</div>
<a class="anchor" id="a80fd16795e1ded9d09d0d164243fd6d7"></a><!-- doxytag: member="dai::BP::_sentMessages" ref="a80fd16795e1ded9d09d0d164243fd6d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::pair&lt;std::size_t, std::size_t&gt; &gt; <a class="el" href="classdai_1_1BP.html#a80fd16795e1ded9d09d0d164243fd6d7">dai::BP::_sentMessages</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The history of message updates (only recorded if <em>recordSentMessages</em> is <code>true</code>). </p>

</div>
</div>
<a class="anchor" id="aba42a6eb1857b7f18f5072a25800ae63"></a><!-- doxytag: member="dai::BP::props" ref="aba42a6eb1857b7f18f5072a25800ae63" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdai_1_1BP_1_1Properties.html">dai::BP::Properties</a>  <a class="el" href="classdai_1_1BP.html#aba42a6eb1857b7f18f5072a25800ae63">dai::BP::props</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parameters for <a class="el" href="classdai_1_1BP.html" title="Approximate inference algorithm &quot;(Loopy) Belief Propagation&quot;.">BP</a>. </p>

</div>
</div>
<a class="anchor" id="af40ab22b371e927fd728569fdbcc607a"></a><!-- doxytag: member="dai::BP::Name" ref="af40ab22b371e927fd728569fdbcc607a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * <a class="el" href="classdai_1_1BP.html#af40ab22b371e927fd728569fdbcc607a">dai::BP::Name</a> = &quot;BP&quot;<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Name of this inference algorithm. </p>

<p>Reimplemented in <a class="el" href="classdai_1_1FBP.html#a0b0c9a1de954bc30ab9aee76794a9c6a">dai::FBP</a>, and <a class="el" href="classdai_1_1TRWBP.html#a13851f3b740c4351943f7c34f611edcf">dai::TRWBP</a>.</p>

</div>
</div>
<a class="anchor" id="a18460881ce5e2a56adf0659f13339131"></a><!-- doxytag: member="dai::BP::recordSentMessages" ref="a18460881ce5e2a56adf0659f13339131" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classdai_1_1BP.html#a18460881ce5e2a56adf0659f13339131">dai::BP::recordSentMessages</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Specifies whether the history of message updates should be recorded. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/dai/<a class="el" href="bp_8h_source.html">bp.h</a></li>
<li>src/bp.cpp</li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sun May 9 16:51:33 2010 for libDAI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
