<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libDAI: dai::EMAlg Class Reference</title>
<link href="customdoxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespacedai.html">dai</a>::<a class="el" href="classdai_1_1EMAlg.html">EMAlg</a>
  </div>
</div>
<div class="contents">
<h1>dai::EMAlg Class Reference</h1><!-- doxytag: class="dai::EMAlg" --><a class="el" href="classdai_1_1EMAlg.html" title="EMAlg performs Expectation Maximization to learn factor parameters.">EMAlg</a> performs Expectation Maximization to learn factor parameters.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="emalg_8h-source.html">dai/emalg.h</a>&gt;</code>
<p>

<p>
<a href="classdai_1_1EMAlg-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Iterator interface</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector<br>
&lt; <a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#7e83053aaf06ae539ce21008cf1124c4">s_iterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iterator over the maximization steps.  <a href="#7e83053aaf06ae539ce21008cf1124c4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector<br>
&lt; <a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a> &gt;<br>
::const_iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#8dbcc457eeec656a77b5fb458691e726">const_s_iterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constant iterator over the maximization steps.  <a href="#8dbcc457eeec656a77b5fb458691e726"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classdai_1_1EMAlg.html#7e83053aaf06ae539ce21008cf1124c4">s_iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#1e0c34c019d5399a303b806d6b9c8be5">s_begin</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns iterator that points to the first maximization step.  <a href="#1e0c34c019d5399a303b806d6b9c8be5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classdai_1_1EMAlg.html#8dbcc457eeec656a77b5fb458691e726">const_s_iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#c1ad15f05a4cfe4ea85063ab5b0c7bb6">s_begin</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns constant iterator that points to the first maximization step.  <a href="#c1ad15f05a4cfe4ea85063ab5b0c7bb6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classdai_1_1EMAlg.html#7e83053aaf06ae539ce21008cf1124c4">s_iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#e5dbc93dc3f028630a4fc85d079730e4">s_end</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns iterator that points beyond the last maximization step.  <a href="#e5dbc93dc3f028630a4fc85d079730e4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classdai_1_1EMAlg.html#8dbcc457eeec656a77b5fb458691e726">const_s_iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#a8717dd2186f842979480ecb69d64a60">s_end</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns constant iterator that points beyond the last maximization step.  <a href="#a8717dd2186f842979480ecb69d64a60"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#f062d83cd85b5eb6571373aef78bcc78">EMAlg</a> (const <a class="el" href="classdai_1_1Evidence.html">Evidence</a> &amp;evidence, <a class="el" href="classdai_1_1InfAlg.html">InfAlg</a> &amp;estep, std::vector&lt; <a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a> &gt; &amp;msteps, const <a class="el" href="classdai_1_1PropertySet.html">PropertySet</a> &amp;termconditions)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct an <a class="el" href="classdai_1_1EMAlg.html" title="EMAlg performs Expectation Maximization to learn factor parameters.">EMAlg</a> from several objects.  <a href="#f062d83cd85b5eb6571373aef78bcc78"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#3800b4fc0c176d6d05b776289b11ad69">EMAlg</a> (const <a class="el" href="classdai_1_1Evidence.html">Evidence</a> &amp;evidence, <a class="el" href="classdai_1_1InfAlg.html">InfAlg</a> &amp;estep, std::istream &amp;mstep_file)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct an <a class="el" href="classdai_1_1EMAlg.html" title="EMAlg performs Expectation Maximization to learn factor parameters.">EMAlg</a> from <a class="el" href="classdai_1_1Evidence.html" title="Stores a data set consisting of multiple samples, where each sample is the observed...">Evidence</a> <em>evidence</em>, an <a class="el" href="classdai_1_1InfAlg.html" title="InfAlg is an abstract base class, defining the common interface of all inference...">InfAlg</a> <em>estep</em>, and an input stream <em>mstep_file</em>.  <a href="#3800b4fc0c176d6d05b776289b11ad69"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#b05088fa0e00f7bc2cf3b86c6aeadc07">setTermConditions</a> (const <a class="el" href="classdai_1_1PropertySet.html">PropertySet</a> &amp;p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the conditions for termination.  <a href="#b05088fa0e00f7bc2cf3b86c6aeadc07"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#cd7db974617f7a7cc5cad541b8894507">hasSatisfiedTermConditions</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if the termination conditions have been met.  <a href="#cd7db974617f7a7cc5cad541b8894507"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#5d57f4e40b758d62df4ed234cd216633">logZ</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the last calculated log likelihood.  <a href="#5d57f4e40b758d62df4ed234cd216633"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#b3833324b49ab76d234a0a6444787f39">Iterations</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns number of iterations done so far.  <a href="#b3833324b49ab76d234a0a6444787f39"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classdai_1_1InfAlg.html">InfAlg</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#76f68da3aaf0e209054ce0851c85cac8">eStep</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the E-step method used.  <a href="#76f68da3aaf0e209054ce0851c85cac8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#e6212c799c73ffd223ee21d2293fca14">iterate</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iterate once over all maximization steps.  <a href="#e6212c799c73ffd223ee21d2293fca14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#10a491805ac80fb701028bf0e8fcda7e">iterate</a> (<a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a> &amp;mstep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iterate over a single <a class="el" href="classdai_1_1MaximizationStep.html" title="A MaximizationStep groups together several parameter estimation tasks (SharedParameters...">MaximizationStep</a>.  <a href="#10a491805ac80fb701028bf0e8fcda7e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#61babd96fa4d1cfc3f2099cfd067770f">run</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iterate until termination conditions are satisfied.  <a href="#61babd96fa4d1cfc3f2099cfd067770f"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#970d673ac70094fb31d7980b419be971">MAX_ITERS_KEY</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Key for setting maximum iterations.  <a href="#970d673ac70094fb31d7980b419be971"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#3b04ac8328d41b0c3139ff0ae7f68176">MAX_ITERS_DEFAULT</a> = 30</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default maximum iterations.  <a href="#3b04ac8328d41b0c3139ff0ae7f68176"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#7c0a7c2887d512b006990ef7f0c3d124">LOG_Z_TOL_KEY</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Key for setting likelihood termination condition.  <a href="#7c0a7c2887d512b006990ef7f0c3d124"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const <a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#2c80ff5a9139cd83e8927cb38fade6f5">LOG_Z_TOL_DEFAULT</a> = 0.01</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default likelihood tolerance.  <a href="#2c80ff5a9139cd83e8927cb38fade6f5"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classdai_1_1Evidence.html">Evidence</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#03a491055d75d86ccdc1cdf976423774">_evidence</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">All the data samples used during learning.  <a href="#03a491055d75d86ccdc1cdf976423774"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classdai_1_1InfAlg.html">InfAlg</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#bc77f7d981993c58380d4f230d7e58b4">_estep</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">How to do the expectation step.  <a href="#bc77f7d981993c58380d4f230d7e58b4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#0538911f3e9f1c2ffda8718ba03b377d">_msteps</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximization steps to take.  <a href="#0538911f3e9f1c2ffda8718ba03b377d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#1b6efd4a619f7362cc5313dca46dab46">_iters</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of iterations done.  <a href="#1b6efd4a619f7362cc5313dca46dab46"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#a2bd99ed48286a5f955858c1d6194128">_lastLogZ</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">History of likelihoods.  <a href="#a2bd99ed48286a5f955858c1d6194128"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#041e98d7dcb8f46054e0111bf9464bd3">_max_iters</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum number of iterations.  <a href="#041e98d7dcb8f46054e0111bf9464bd3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdai_1_1EMAlg.html#7d57039f534b60af035823ff6502575a">_log_z_tol</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convergence tolerance.  <a href="#7d57039f534b60af035823ff6502575a"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="classdai_1_1EMAlg.html" title="EMAlg performs Expectation Maximization to learn factor parameters.">EMAlg</a> performs Expectation Maximization to learn factor parameters. 
<p>
This requires specifying:<ul>
<li><a class="el" href="classdai_1_1Evidence.html" title="Stores a data set consisting of multiple samples, where each sample is the observed...">Evidence</a> (instances of observations from the graphical model),</li><li><a class="el" href="classdai_1_1InfAlg.html" title="InfAlg is an abstract base class, defining the common interface of all inference...">InfAlg</a> for performing the E-step (which includes the factor graph),</li><li>a vector of <a class="el" href="classdai_1_1MaximizationStep.html" title="A MaximizationStep groups together several parameter estimation tasks (SharedParameters...">MaximizationStep</a> 's steps to be performed.</li></ul>
<p>
This implementation can perform incremental EM by using multiple MaximizationSteps. An expectation step is performed between execution of each <a class="el" href="classdai_1_1MaximizationStep.html" title="A MaximizationStep groups together several parameter estimation tasks (SharedParameters...">MaximizationStep</a>. A call to <a class="el" href="classdai_1_1EMAlg.html#e6212c799c73ffd223ee21d2293fca14" title="Iterate once over all maximization steps.">iterate()</a> will cycle through all <a class="el" href="classdai_1_1MaximizationStep.html" title="A MaximizationStep groups together several parameter estimation tasks (SharedParameters...">MaximizationStep</a> 's. A call to <a class="el" href="classdai_1_1EMAlg.html#61babd96fa4d1cfc3f2099cfd067770f" title="Iterate until termination conditions are satisfied.">run()</a> will call <a class="el" href="classdai_1_1EMAlg.html#e6212c799c73ffd223ee21d2293fca14" title="Iterate once over all maximization steps.">iterate()</a> until the termination criteria have been met.<p>
Having multiple and separate maximization steps allows for maximizing some parameters, performing another E-step, and then maximizing separate parameters, which may result in faster convergence in some cases.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Charles Vaske </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>

<p>
<a class="el" href="example__sprinkler__em_8cpp-example.html#_a9">example_sprinkler_em.cpp</a>.</dl><hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="7e83053aaf06ae539ce21008cf1124c4"></a><!-- doxytag: member="dai::EMAlg::s_iterator" ref="7e83053aaf06ae539ce21008cf1124c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a>&gt;::iterator <a class="el" href="classdai_1_1EMAlg.html#7e83053aaf06ae539ce21008cf1124c4">dai::EMAlg::s_iterator</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Iterator over the maximization steps. 
<p>

</div>
</div><p>
<a class="anchor" name="8dbcc457eeec656a77b5fb458691e726"></a><!-- doxytag: member="dai::EMAlg::const_s_iterator" ref="8dbcc457eeec656a77b5fb458691e726" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a>&gt;::const_iterator <a class="el" href="classdai_1_1EMAlg.html#8dbcc457eeec656a77b5fb458691e726">dai::EMAlg::const_s_iterator</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constant iterator over the maximization steps. 
<p>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="f062d83cd85b5eb6571373aef78bcc78"></a><!-- doxytag: member="dai::EMAlg::EMAlg" ref="f062d83cd85b5eb6571373aef78bcc78" args="(const Evidence &amp;evidence, InfAlg &amp;estep, std::vector&lt; MaximizationStep &gt; &amp;msteps, const PropertySet &amp;termconditions)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dai::EMAlg::EMAlg           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1Evidence.html">Evidence</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>evidence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdai_1_1InfAlg.html">InfAlg</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>estep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>msteps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdai_1_1PropertySet.html">PropertySet</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>termconditions</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct an <a class="el" href="classdai_1_1EMAlg.html" title="EMAlg performs Expectation Maximization to learn factor parameters.">EMAlg</a> from several objects. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>evidence</em>&nbsp;</td><td>Specifies the observed evidence </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>estep</em>&nbsp;</td><td>Inference algorithm to be used for the E-step </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msteps</em>&nbsp;</td><td>Vector of maximization steps, each of which is a group of parameter estimation tasks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>termconditions</em>&nbsp;</td><td>Termination conditions </td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classdai_1_1EMAlg.html#b05088fa0e00f7bc2cf3b86c6aeadc07" title="Change the conditions for termination.">setTermConditions()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="3800b4fc0c176d6d05b776289b11ad69"></a><!-- doxytag: member="dai::EMAlg::EMAlg" ref="3800b4fc0c176d6d05b776289b11ad69" args="(const Evidence &amp;evidence, InfAlg &amp;estep, std::istream &amp;mstep_file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dai::EMAlg::EMAlg           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1Evidence.html">Evidence</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>evidence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdai_1_1InfAlg.html">InfAlg</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>estep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::istream &amp;&nbsp;</td>
          <td class="paramname"> <em>mstep_file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct an <a class="el" href="classdai_1_1EMAlg.html" title="EMAlg performs Expectation Maximization to learn factor parameters.">EMAlg</a> from <a class="el" href="classdai_1_1Evidence.html" title="Stores a data set consisting of multiple samples, where each sample is the observed...">Evidence</a> <em>evidence</em>, an <a class="el" href="classdai_1_1InfAlg.html" title="InfAlg is an abstract base class, defining the common interface of all inference...">InfAlg</a> <em>estep</em>, and an input stream <em>mstep_file</em>. 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="fileformats.html#fileformats-emalg">Expectation Maximization (.em) file format</a> </dd></dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b05088fa0e00f7bc2cf3b86c6aeadc07"></a><!-- doxytag: member="dai::EMAlg::setTermConditions" ref="b05088fa0e00f7bc2cf3b86c6aeadc07" args="(const PropertySet &amp;p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::EMAlg::setTermConditions           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdai_1_1PropertySet.html">PropertySet</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>p</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the conditions for termination. 
<p>
There are two possible parameters in the <a class="el" href="classdai_1_1PropertySet.html" title="Represents a set of properties, mapping keys (of type PropertyKey) to values (of...">PropertySet</a> <em>p:</em> <ul>
<li><em>max_iters</em> maximum number of iterations</li><li><em>log_z_tol</em> critical proportion of increase in logZ</li></ul>
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd>hasSatisifiedTermConditions() </dd></dl>

</div>
</div><p>
<a class="anchor" name="cd7db974617f7a7cc5cad541b8894507"></a><!-- doxytag: member="dai::EMAlg::hasSatisfiedTermConditions" ref="cd7db974617f7a7cc5cad541b8894507" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dai::EMAlg::hasSatisfiedTermConditions           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if the termination conditions have been met. 
<p>
There are two sufficient termination conditions:<ol type=1>
<li>the maximum number of iterations has been performed</li><li>the ratio of logZ increase over previous logZ is less than the tolerance, i.e., <img class="formulaInl" alt="$ \frac{\log(Z_t) - \log(Z_{t-1})}{| \log(Z_{t-1}) | } < \mathrm{tol} $" src="form_62.png">. </li></ol>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="example__sprinkler__em_8cpp-example.html#a10">example_sprinkler_em.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="5d57f4e40b758d62df4ed234cd216633"></a><!-- doxytag: member="dai::EMAlg::logZ" ref="5d57f4e40b758d62df4ed234cd216633" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a> dai::EMAlg::logZ           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the last calculated log likelihood. 
<p>

</div>
</div><p>
<a class="anchor" name="b3833324b49ab76d234a0a6444787f39"></a><!-- doxytag: member="dai::EMAlg::Iterations" ref="b3833324b49ab76d234a0a6444787f39" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t dai::EMAlg::Iterations           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns number of iterations done so far. 
<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="example__sprinkler__em_8cpp-example.html#a13">example_sprinkler_em.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="76f68da3aaf0e209054ce0851c85cac8"></a><!-- doxytag: member="dai::EMAlg::eStep" ref="76f68da3aaf0e209054ce0851c85cac8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classdai_1_1InfAlg.html">InfAlg</a>&amp; dai::EMAlg::eStep           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the E-step method used. 
<p>

</div>
</div><p>
<a class="anchor" name="e6212c799c73ffd223ee21d2293fca14"></a><!-- doxytag: member="dai::EMAlg::iterate" ref="e6212c799c73ffd223ee21d2293fca14" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a> dai::EMAlg::iterate           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Iterate once over all maximization steps. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Log-likelihood after iteration </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="example__sprinkler__em_8cpp-example.html#a12">example_sprinkler_em.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="10a491805ac80fb701028bf0e8fcda7e"></a><!-- doxytag: member="dai::EMAlg::iterate" ref="10a491805ac80fb701028bf0e8fcda7e" args="(MaximizationStep &amp;mstep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a> dai::EMAlg::iterate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>mstep</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Iterate over a single <a class="el" href="classdai_1_1MaximizationStep.html" title="A MaximizationStep groups together several parameter estimation tasks (SharedParameters...">MaximizationStep</a>. 
<p>

</div>
</div><p>
<a class="anchor" name="61babd96fa4d1cfc3f2099cfd067770f"></a><!-- doxytag: member="dai::EMAlg::run" ref="61babd96fa4d1cfc3f2099cfd067770f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dai::EMAlg::run           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Iterate until termination conditions are satisfied. 
<p>

</div>
</div><p>
<a class="anchor" name="1e0c34c019d5399a303b806d6b9c8be5"></a><!-- doxytag: member="dai::EMAlg::s_begin" ref="1e0c34c019d5399a303b806d6b9c8be5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1EMAlg.html#7e83053aaf06ae539ce21008cf1124c4">s_iterator</a> dai::EMAlg::s_begin           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns iterator that points to the first maximization step. 
<p>

</div>
</div><p>
<a class="anchor" name="c1ad15f05a4cfe4ea85063ab5b0c7bb6"></a><!-- doxytag: member="dai::EMAlg::s_begin" ref="c1ad15f05a4cfe4ea85063ab5b0c7bb6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1EMAlg.html#8dbcc457eeec656a77b5fb458691e726">const_s_iterator</a> dai::EMAlg::s_begin           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns constant iterator that points to the first maximization step. 
<p>

</div>
</div><p>
<a class="anchor" name="e5dbc93dc3f028630a4fc85d079730e4"></a><!-- doxytag: member="dai::EMAlg::s_end" ref="e5dbc93dc3f028630a4fc85d079730e4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1EMAlg.html#7e83053aaf06ae539ce21008cf1124c4">s_iterator</a> dai::EMAlg::s_end           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns iterator that points beyond the last maximization step. 
<p>

</div>
</div><p>
<a class="anchor" name="a8717dd2186f842979480ecb69d64a60"></a><!-- doxytag: member="dai::EMAlg::s_end" ref="a8717dd2186f842979480ecb69d64a60" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1EMAlg.html#8dbcc457eeec656a77b5fb458691e726">const_s_iterator</a> dai::EMAlg::s_end           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns constant iterator that points beyond the last maximization step. 
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="03a491055d75d86ccdc1cdf976423774"></a><!-- doxytag: member="dai::EMAlg::_evidence" ref="03a491055d75d86ccdc1cdf976423774" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classdai_1_1Evidence.html">Evidence</a>&amp; <a class="el" href="classdai_1_1EMAlg.html#03a491055d75d86ccdc1cdf976423774">dai::EMAlg::_evidence</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
All the data samples used during learning. 
<p>

</div>
</div><p>
<a class="anchor" name="bc77f7d981993c58380d4f230d7e58b4"></a><!-- doxytag: member="dai::EMAlg::_estep" ref="bc77f7d981993c58380d4f230d7e58b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdai_1_1InfAlg.html">InfAlg</a>&amp; <a class="el" href="classdai_1_1EMAlg.html#bc77f7d981993c58380d4f230d7e58b4">dai::EMAlg::_estep</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
How to do the expectation step. 
<p>

</div>
</div><p>
<a class="anchor" name="0538911f3e9f1c2ffda8718ba03b377d"></a><!-- doxytag: member="dai::EMAlg::_msteps" ref="0538911f3e9f1c2ffda8718ba03b377d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classdai_1_1MaximizationStep.html">MaximizationStep</a>&gt; <a class="el" href="classdai_1_1EMAlg.html#0538911f3e9f1c2ffda8718ba03b377d">dai::EMAlg::_msteps</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The maximization steps to take. 
<p>

</div>
</div><p>
<a class="anchor" name="1b6efd4a619f7362cc5313dca46dab46"></a><!-- doxytag: member="dai::EMAlg::_iters" ref="1b6efd4a619f7362cc5313dca46dab46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classdai_1_1EMAlg.html#1b6efd4a619f7362cc5313dca46dab46">dai::EMAlg::_iters</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of iterations done. 
<p>

</div>
</div><p>
<a class="anchor" name="a2bd99ed48286a5f955858c1d6194128"></a><!-- doxytag: member="dai::EMAlg::_lastLogZ" ref="a2bd99ed48286a5f955858c1d6194128" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a>&gt; <a class="el" href="classdai_1_1EMAlg.html#a2bd99ed48286a5f955858c1d6194128">dai::EMAlg::_lastLogZ</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
History of likelihoods. 
<p>

</div>
</div><p>
<a class="anchor" name="041e98d7dcb8f46054e0111bf9464bd3"></a><!-- doxytag: member="dai::EMAlg::_max_iters" ref="041e98d7dcb8f46054e0111bf9464bd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classdai_1_1EMAlg.html#041e98d7dcb8f46054e0111bf9464bd3">dai::EMAlg::_max_iters</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum number of iterations. 
<p>

</div>
</div><p>
<a class="anchor" name="7d57039f534b60af035823ff6502575a"></a><!-- doxytag: member="dai::EMAlg::_log_z_tol" ref="7d57039f534b60af035823ff6502575a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a> <a class="el" href="classdai_1_1EMAlg.html#7d57039f534b60af035823ff6502575a">dai::EMAlg::_log_z_tol</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convergence tolerance. 
<p>

</div>
</div><p>
<a class="anchor" name="970d673ac70094fb31d7980b419be971"></a><!-- doxytag: member="dai::EMAlg::MAX_ITERS_KEY" ref="970d673ac70094fb31d7980b419be971" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string <a class="el" href="classdai_1_1EMAlg.html#970d673ac70094fb31d7980b419be971">dai::EMAlg::MAX_ITERS_KEY</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Key for setting maximum iterations. 
<p>

</div>
</div><p>
<a class="anchor" name="3b04ac8328d41b0c3139ff0ae7f68176"></a><!-- doxytag: member="dai::EMAlg::MAX_ITERS_DEFAULT" ref="3b04ac8328d41b0c3139ff0ae7f68176" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const size_t <a class="el" href="classdai_1_1EMAlg.html#3b04ac8328d41b0c3139ff0ae7f68176">dai::EMAlg::MAX_ITERS_DEFAULT</a> = 30<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default maximum iterations. 
<p>

</div>
</div><p>
<a class="anchor" name="7c0a7c2887d512b006990ef7f0c3d124"></a><!-- doxytag: member="dai::EMAlg::LOG_Z_TOL_KEY" ref="7c0a7c2887d512b006990ef7f0c3d124" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string <a class="el" href="classdai_1_1EMAlg.html#7c0a7c2887d512b006990ef7f0c3d124">dai::EMAlg::LOG_Z_TOL_KEY</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Key for setting likelihood termination condition. 
<p>

</div>
</div><p>
<a class="anchor" name="2c80ff5a9139cd83e8927cb38fade6f5"></a><!-- doxytag: member="dai::EMAlg::LOG_Z_TOL_DEFAULT" ref="2c80ff5a9139cd83e8927cb38fade6f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespacedai.html#e7d0472fdc89a8635825d01940e91cbf">Real</a> <a class="el" href="classdai_1_1EMAlg.html#2c80ff5a9139cd83e8927cb38fade6f5">dai::EMAlg::LOG_Z_TOL_DEFAULT</a> = 0.01<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default likelihood tolerance. 
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>include/dai/<a class="el" href="emalg_8h-source.html">emalg.h</a><li>src/emalg.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Aug 19 13:58:13 2010 for libDAI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
