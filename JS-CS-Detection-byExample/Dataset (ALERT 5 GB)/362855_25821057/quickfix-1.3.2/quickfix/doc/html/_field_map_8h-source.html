<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">

<title>C:/release/quickfix/src/C++/FieldMap.h Source File</title>

<link href="quickfix.css" rel="stylesheet" type="text/css">

<table cellspacing="0" cellpadding="0" border="0">

  <tr>

   <td><img src="images/outsideTopLeft.gif"></td>

   <td width="100%" class="outsideTop">&nbsp;</td>

   <td><img src="images/outsideTopRight.gif"></td>

  </tr>

  <tr>

   <td class="outsideLeft">&nbsp;</td>

   <td>

	<img src="images/QuickFIX.jpg" align="middle" border=0>

	&nbsp;&nbsp;

	<a href="index.html">Index</a>&nbsp;

	<a href="files.html">Source Files</a>&nbsp;

	<a href="annotated.html">Annotated Class List</a>&nbsp;

	<a href="classes.html">Alphabetical Class List</a>&nbsp;

	<a href="hierarchy.html">Class Hierarchy</a>&nbsp;

	<a href="inherits.html">Graphical Class Hierarchy</a>&nbsp;

   </td>

   <td class="outsideRight">&nbsp;</td>

  </tr>

  <tr>

   <td><img src="images/outsideBottomLeft.gif"></td>

   <td width=100% class="outsideBottom">&nbsp;</td>

   <td><img src="images/outsideBottomRight.gif"></td>

  </tr>

</table>

</head><body bgcolor="#ffffff">

<!-- Generated by Doxygen 1.2.17 -->
<h1>C:/release/quickfix/src/C++/FieldMap.h</h1><a href="_field_map_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* -*- C++ -*- */</span>
00002 <span class="comment">/* ====================================================================</span>
00003 <span class="comment"> * The QuickFIX Software License, Version 1.0</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * Copyright (c) 2001 ThoughtWorks, Inc.  All rights</span>
00006 <span class="comment"> * reserved.</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
00009 <span class="comment"> * modification, are permitted provided that the following conditions</span>
00010 <span class="comment"> * are met:</span>
00011 <span class="comment"> *</span>
00012 <span class="comment"> * 1. Redistributions of source code must retain the above copyright</span>
00013 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span>
00016 <span class="comment"> *    notice, this list of conditions and the following disclaimer in</span>
00017 <span class="comment"> *    the documentation and/or other materials provided with the</span>
00018 <span class="comment"> *    distribution.</span>
00019 <span class="comment"> *</span>
00020 <span class="comment"> * 3. The end-user documentation included with the redistribution,</span>
00021 <span class="comment"> *    if any, must include the following acknowledgment:</span>
00022 <span class="comment"> *       "This product includes software developed by</span>
00023 <span class="comment"> *        ThoughtWorks, Inc. (http://www.thoughtworks.com/)."</span>
00024 <span class="comment"> *    Alternately, this acknowledgment may appear in the software itself,</span>
00025 <span class="comment"> *    if and wherever such third-party acknowledgments normally appear.</span>
00026 <span class="comment"> *</span>
00027 <span class="comment"> * 4. The names "QuickFIX" and "ThoughtWorks, Inc." must</span>
00028 <span class="comment"> *    not be used to endorse or promote products derived from this</span>
00029 <span class="comment"> *    software without prior written permission. For written</span>
00030 <span class="comment"> *    permission, please contact quickfix-users@lists.sourceforge.net.</span>
00031 <span class="comment"> *</span>
00032 <span class="comment"> * 5. Products derived from this software may not be called "QuickFIX",</span>
00033 <span class="comment"> *    nor may "QuickFIX" appear in their name, without prior written</span>
00034 <span class="comment"> *    permission of ThoughtWorks, Inc.</span>
00035 <span class="comment"> *</span>
00036 <span class="comment"> * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED</span>
00037 <span class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span>
00038 <span class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
00039 <span class="comment"> * DISCLAIMED.  IN NO EVENT SHALL THOUGHTWORKS INC OR</span>
00040 <span class="comment"> * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
00041 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
00042 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF</span>
00043 <span class="comment"> * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span>
00044 <span class="comment"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
00045 <span class="comment"> * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</span>
00046 <span class="comment"> * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span>
00047 <span class="comment"> * SUCH DAMAGE.</span>
00048 <span class="comment"> * ====================================================================</span>
00049 <span class="comment"> */</span>
00050 
00051 <span class="preprocessor">#ifndef FIX_FIELDMAP</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#define FIX_FIELDMAP</span>
00053 <span class="preprocessor"></span>
00054 <span class="preprocessor">#ifdef _MSC_VER</span>
00055 <span class="preprocessor"></span><span class="preprocessor">#pragma warning( disable: 4786 )</span>
00056 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00057 <span class="preprocessor"></span>
00058 <span class="preprocessor">#include "<a class="code" href="_field_8h.html">Field.h</a>"</span>
00059 <span class="preprocessor">#include "<a class="code" href="_message_sorters_8h.html">MessageSorters.h</a>"</span>
00060 <span class="preprocessor">#include "<a class="code" href="_exceptions_8h.html">Exceptions.h</a>"</span>
00061 <span class="preprocessor">#include &lt;map&gt;</span>
00062 <span class="preprocessor">#include &lt;vector&gt;</span>
00063 <span class="preprocessor">#include &lt;sstream&gt;</span>
00064 <span class="preprocessor">#include &lt;algorithm&gt;</span>
00065 
00066 <span class="keyword">namespace </span>FIX
00067 {
<a name="l00077"></a><a class="code" href="class_f_i_x_1_1_field_map.html">00077</a> <span class="keyword">class </span><a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a>
00078 {
00079 <span class="keyword">public</span>:
<a name="l00080"></a><a class="code" href="class_f_i_x_1_1_field_map.html#s0">00080</a>   <span class="keyword">typedef</span> std::map &lt; int, FieldBase, message_order &gt; <a class="code" href="class_f_i_x_1_1_field_map.html#s0">Fields</a>;
<a name="l00081"></a><a class="code" href="class_f_i_x_1_1_field_map.html#s1">00081</a>   <span class="keyword">typedef</span> std::map &lt; int, std::vector &lt; FieldMap* &gt; &gt; <a class="code" href="class_f_i_x_1_1_field_map.html#s1">Groups</a>;
<a name="l00082"></a><a class="code" href="class_f_i_x_1_1_field_map.html#s2">00082</a>   <span class="keyword">typedef</span> Fields::const_iterator <a class="code" href="class_f_i_x_1_1_field_map.html#s2">iterator</a>;
<a name="l00083"></a><a class="code" href="class_f_i_x_1_1_field_map.html#s3">00083</a>   <span class="keyword">typedef</span> <a class="code" href="class_f_i_x_1_1_field_map.html#s2">iterator</a> <a class="code" href="class_f_i_x_1_1_field_map.html#s3">const_iterator</a>;
<a name="l00084"></a><a class="code" href="class_f_i_x_1_1_field_map.html#s4">00084</a>   <span class="keyword">typedef</span> Groups::const_iterator <a class="code" href="class_f_i_x_1_1_field_map.html#s4">g_iterator</a>;
<a name="l00085"></a><a class="code" href="class_f_i_x_1_1_field_map.html#s5">00085</a>   <span class="keyword">typedef</span> Groups::const_iterator <a class="code" href="class_f_i_x_1_1_field_map.html#s5">g_const_iterator</a>;
00086 
<a name="l00087"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a0">00087</a>   <a class="code" href="class_f_i_x_1_1_field_map.html#a0">FieldMap</a>( <span class="keyword">const</span> <a class="code" href="struct_f_i_x_1_1message__order.html">message_order</a>&amp; order =
00088               <a class="code" href="struct_f_i_x_1_1message__order.html">message_order</a>( message_order::normal ) )
00089 : <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>( order ) {}
00090 
<a name="l00091"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a1">00091</a>   <a class="code" href="class_f_i_x_1_1_field_map.html#a0">FieldMap</a>( <span class="keywordtype">int</span> size, <span class="keyword">const</span> <span class="keywordtype">int</span> order[] )
00092 : <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>( <a class="code" href="struct_f_i_x_1_1message__order.html">message_order</a>(size, order) ) {}
00093 
<a name="l00094"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a2">00094</a>   <a class="code" href="class_f_i_x_1_1_field_map.html#a0">FieldMap</a>( <span class="keyword">const</span> <a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a>&amp; copy )
00095   {
00096     *<span class="keyword">this</span> = copy;
00097   }
00098 
<a name="l00099"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a3">00099</a>   <span class="keyword">virtual</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a3">~FieldMap</a>() { <a class="code" href="class_f_i_x_1_1_field_map.html#a17">clear</a>(); }
00100 
<a name="l00101"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a4">00101</a>   <a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a>&amp; <a class="code" href="class_f_i_x_1_1_field_map.html#a4">operator=</a>( <span class="keyword">const</span> <a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a>&amp; rhs )
00102   {
00103     <a class="code" href="class_f_i_x_1_1_field_map.html#a17">clear</a>();
00104     <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a> = rhs.<a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>;
00105 
00106     Groups::const_iterator i;
00107     <span class="keywordflow">for</span> ( i = rhs.<a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.begin(); i != rhs.<a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.end(); ++i )
00108     {
00109       std::vector &lt; FieldMap* &gt; ::const_iterator j;
00110       <span class="keywordflow">for</span> ( j = i-&gt;second.begin(); j != i-&gt;second.end(); ++j )
00111         <a class="code" href="class_f_i_x_1_1_field_map.html#a10">addGroup</a>( i-&gt;first, **j );
00112     }
00113     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00114   }
00115 
<a name="l00117"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a5">00117</a>   <span class="keywordtype">void</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a5">setField</a>( <span class="keyword">const</span> <a class="code" href="class_f_i_x_1_1_field_base.html">FieldBase</a>&amp; field )
00118   {
00119     <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.erase( field.<a class="code" href="class_f_i_x_1_1_field_base.html#a1">getField</a>() );
00120     <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.insert( std::make_pair( field.<a class="code" href="class_f_i_x_1_1_field_base.html#a1">getField</a>(), field ) );
00121   }
00122 
<a name="l00124"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a6">00124</a>   <span class="keywordtype">void</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a5">setField</a>( <span class="keywordtype">int</span> field, <span class="keyword">const</span> std::string value )
00125   {
00126     <a class="code" href="class_f_i_x_1_1_field_base.html">FieldBase</a> fieldBase( field, value );
00127     <a class="code" href="class_f_i_x_1_1_field_map.html#a5">setField</a>( fieldBase );
00128   }
00129 
<a name="l00131"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a7">00131</a>   <a class="code" href="class_f_i_x_1_1_field_base.html">FieldBase</a>&amp; <a class="code" href="class_f_i_x_1_1_field_map.html#a7">getField</a>( <a class="code" href="class_f_i_x_1_1_field_base.html">FieldBase</a>&amp; field )
00132   <span class="keyword">const</span> <span class="keywordflow">throw</span>( <a class="code" href="struct_f_i_x_1_1_field_not_found.html">FieldNotFound</a>&amp; )
00133   {
00134     Fields::const_iterator iter = <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.find( field.getField() );
00135     <span class="keywordflow">if</span> ( iter == <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.end() )
00136       <span class="keywordflow">throw</span> <a class="code" href="struct_f_i_x_1_1_field_not_found.html">FieldNotFound</a>( field.getField() );
00137     field = iter-&gt;second;
00138     <span class="keywordflow">return</span> field;
00139   }
00140 
<a name="l00142"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a8">00142</a>   std::string <a class="code" href="class_f_i_x_1_1_field_map.html#a7">getField</a>( <span class="keywordtype">int</span> field )
00143   <span class="keyword">const</span> <span class="keywordflow">throw</span>( <a class="code" href="struct_f_i_x_1_1_field_not_found.html">FieldNotFound</a>&amp; )
00144   {
00145     <a class="code" href="class_f_i_x_1_1_field_base.html">FieldBase</a> fieldBase( field, <span class="stringliteral">""</span> );
00146     <a class="code" href="class_f_i_x_1_1_field_map.html#a7">getField</a>( fieldBase );
00147     <span class="keywordflow">return</span> fieldBase.<a class="code" href="class_f_i_x_1_1_field_base.html#a2">getString</a>();
00148   }
00149 
<a name="l00150"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a9">00150</a>   <a class="code" href="class_f_i_x_1_1_field_base.html">FieldBase</a>&amp; <a class="code" href="class_f_i_x_1_1_field_map.html#a7">getField</a>( <a class="code" href="class_f_i_x_1_1_field_base.html">FieldBase</a>&amp; field, <span class="keywordtype">int</span> pos )
00151   <span class="keyword">const</span> <span class="keywordflow">throw</span>( <a class="code" href="struct_f_i_x_1_1_field_not_found.html">FieldNotFound</a>&amp; )
00152   {
00153     Fields::const_iterator iter = <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.find( field.getField() );
00154     <span class="keywordflow">if</span> ( iter == <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.end() )
00155       <span class="keywordflow">throw</span> <a class="code" href="struct_f_i_x_1_1_field_not_found.html">FieldNotFound</a>( field.getField() );
00156     <span class="keywordflow">if</span> ( <a class="code" href="class_f_i_x_1_1_field_map.html#a16">countField</a>( field ) &lt; pos )
00157       <span class="keywordflow">throw</span> <a class="code" href="struct_f_i_x_1_1_field_not_found.html">FieldNotFound</a>( field.getField() );
00158 
00159   <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 1; i &lt; pos; ++i, ++iter ) {}
00160     field = iter-&gt;second;
00161     <span class="keywordflow">return</span> field;
00162   }
00163 
<a name="l00164"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a10">00164</a>   <span class="keywordtype">void</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a10">addGroup</a>( <span class="keywordtype">int</span> field, <span class="keyword">const</span> <a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a>&amp; group )
00165   {
00166     <a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a> * pGroup = <span class="keyword">new</span> <a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a>;
00167     *pGroup = group;
00168     <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>[ field ].push_back( pGroup );
00169     Groups::iterator i = <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.find( field );
00170     <a class="code" href="class_f_i_x_1_1_field_map.html#a5">setField</a>( <a class="code" href="class_f_i_x_1_1_int_field.html">IntField</a>( field, i-&gt;second.size() ) );
00171   }
00172 
<a name="l00173"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a11">00173</a>   <a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a>&amp; <a class="code" href="class_f_i_x_1_1_field_map.html#a11">getGroup</a>( <span class="keywordtype">int</span> num, <span class="keywordtype">int</span> field, <a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a>&amp; group ) <span class="keyword">const</span>
00174   <span class="keywordflow">throw</span>( <a class="code" href="struct_f_i_x_1_1_field_not_found.html">FieldNotFound</a>&amp; )
00175   {
00176     Groups::const_iterator i = <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.find( field );
00177     <span class="keywordflow">if</span> ( i == <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.end() ) <span class="keywordflow">throw</span> <a class="code" href="struct_f_i_x_1_1_field_not_found.html">FieldNotFound</a>( field );
00178     <span class="keywordflow">if</span> ( i-&gt;second.size() &lt; ( unsigned ) num ) <span class="keywordflow">throw</span> <a class="code" href="struct_f_i_x_1_1_field_not_found.html">FieldNotFound</a>( field );
00179     group = *( *( i-&gt;second.begin() + ( num - 1 ) ) );
00180     <span class="keywordflow">return</span> group;
00181   }
00182 
<a name="l00188"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a12">00188</a>   <span class="keywordtype">bool</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a12">isSetField</a>( <span class="keyword">const</span> <a class="code" href="class_f_i_x_1_1_field_base.html">FieldBase</a>&amp; field )<span class="keyword"> const</span>
00189 <span class="keyword">  </span>{
00190     <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.find( field.<a class="code" href="class_f_i_x_1_1_field_base.html#a1">getField</a>() ) != <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.end();
00191   }
00192 
<a name="l00198"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a13">00198</a>   <span class="keywordtype">bool</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a12">isSetField</a>( <span class="keywordtype">int</span> field )<span class="keyword"> const</span>
00199 <span class="keyword">  </span>{
00200     <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.find( field ) != <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.end();
00201   }
00202 
<a name="l00204"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a14">00204</a>   <span class="keywordtype">bool</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a14">hasGroup</a>( <span class="keywordtype">unsigned</span> num, <span class="keywordtype">int</span> field, <a class="code" href="class_f_i_x_1_1_field_map.html">FieldMap</a>&amp; group )
00205   {
00206     Groups::const_iterator i = <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.find( field );
00207     <span class="keywordflow">return</span> i != <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.end();
00208   }
00209 
<a name="l00210"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a15">00210</a>   <span class="keywordtype">void</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a15">removeField</a>( <span class="keywordtype">int</span> field )
00211   {
00212     Fields::iterator i = <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.find( field );
00213     <span class="keywordflow">if</span> ( i != <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.end() )
00214       <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.erase( i );
00215   }
00216 
<a name="l00217"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a16">00217</a>   <span class="keywordtype">int</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a16">countField</a>( <span class="keyword">const</span> <a class="code" href="class_f_i_x_1_1_field_base.html">FieldBase</a>&amp; field )<span class="keyword"> const</span>
00218 <span class="keyword">  </span>{
00219     <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.count( field.<a class="code" href="class_f_i_x_1_1_field_base.html#a1">getField</a>() );
00220   }
00221 
<a name="l00223"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a17">00223</a>   <span class="keywordtype">void</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a17">clear</a>()
00224   {
00225     <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.clear();
00226 
00227     Groups::iterator i;
00228     <span class="keywordflow">for</span> ( i = <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.begin(); i != <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.end(); ++i )
00229     {
00230       std::vector &lt; FieldMap* &gt; ::iterator j;
00231       <span class="keywordflow">for</span> ( j = i-&gt;second.begin(); j != i-&gt;second.end(); ++j )
00232         <span class="keyword">delete</span> *j;
00233     }
00234     <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.clear();
00235   }
00236 
<a name="l00237"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a18">00237</a>   std::string <a class="code" href="class_f_i_x_1_1_field_map.html#a18">calculateString</a>()<span class="keyword"> const</span>
00238 <span class="keyword">  </span>{
00239     std::string result;
00240     Fields::const_iterator i;
00241     <span class="keywordflow">for</span> ( i = <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.begin(); i != <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.end(); ++i )
00242     {
00243       result += i-&gt;second.getValue();
00244 
00245       <span class="comment">// add groups if they exist</span>
00246       Groups::const_iterator j = <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.find( i-&gt;first );
00247       <span class="keywordflow">if</span> ( j == <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.end() ) <span class="keywordflow">continue</span>;
00248       std::vector &lt; FieldMap* &gt; ::const_iterator k;
00249       <span class="keywordflow">for</span> ( k = j-&gt;second.begin(); k != j-&gt;second.end(); ++k )
00250         result += ( *k ) -&gt;calculateString();
00251     }
00252     <span class="keywordflow">return</span> result;
00253   }
00254 
<a name="l00255"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a19">00255</a>   <span class="keywordtype">int</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a19">calculateLength</a>()<span class="keyword"> const</span>
00256 <span class="keyword">  </span>{
00257     <span class="keywordtype">int</span> result = 0;
00258     Fields::const_iterator i;
00259     <span class="keywordflow">for</span> ( i = <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.begin(); i != <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.end(); ++i )
00260     {
00261       <span class="keywordflow">if</span> ( i-&gt;first != FIELD::BeginString
00262            &amp;&amp; i-&gt;first != FIELD::BodyLength
00263            &amp;&amp; i-&gt;first != FIELD::CheckSum )
00264       { result += i-&gt;second.getLength(); }
00265     }
00266 
00267     Groups::const_iterator j;
00268     <span class="keywordflow">for</span> ( j = <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.begin(); j != <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.end(); ++j )
00269     {
00270       std::vector &lt; FieldMap* &gt; ::const_iterator k;
00271       <span class="keywordflow">for</span> ( k = j-&gt;second.begin(); k != j-&gt;second.end(); ++k )
00272         result += ( *k ) -&gt;calculateLength();
00273     }
00274     <span class="keywordflow">return</span> result;
00275   }
00276 
<a name="l00277"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a20">00277</a>   <span class="keywordtype">int</span> <a class="code" href="class_f_i_x_1_1_field_map.html#a20">calculateTotal</a>()<span class="keyword"> const</span>
00278 <span class="keyword">  </span>{
00279     <span class="keywordtype">int</span> result = 0;
00280     Fields::const_iterator i;
00281     <span class="keywordflow">for</span> ( i = <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.begin(); i != <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.end(); ++i )
00282     {
00283       <span class="keywordflow">if</span> ( i-&gt;first != FIELD::CheckSum )
00284         result += i-&gt;second.getTotal();
00285     }
00286 
00287     Groups::const_iterator j;
00288     <span class="keywordflow">for</span> ( j = <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.begin(); j != <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.end(); ++j )
00289     {
00290       std::vector &lt; FieldMap* &gt; ::const_iterator k;
00291       <span class="keywordflow">for</span> ( k = j-&gt;second.begin(); k != j-&gt;second.end(); ++k )
00292         result += ( *k ) -&gt;calculateTotal();
00293     }
00294     <span class="keywordflow">return</span> result;
00295   }
00296 
<a name="l00297"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a21">00297</a>   <a class="code" href="class_f_i_x_1_1_field_map.html#s2">iterator</a> <a class="code" href="class_f_i_x_1_1_field_map.html#a21">begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.begin(); }
<a name="l00298"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a22">00298</a>   <a class="code" href="class_f_i_x_1_1_field_map.html#s2">iterator</a> <a class="code" href="class_f_i_x_1_1_field_map.html#a22">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>.end(); }
<a name="l00299"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a23">00299</a>   <a class="code" href="class_f_i_x_1_1_field_map.html#s4">g_iterator</a> <a class="code" href="class_f_i_x_1_1_field_map.html#a23">g_begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.begin(); }
<a name="l00300"></a><a class="code" href="class_f_i_x_1_1_field_map.html#a24">00300</a>   <a class="code" href="class_f_i_x_1_1_field_map.html#s4">g_iterator</a> <a class="code" href="class_f_i_x_1_1_field_map.html#a24">g_end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>.end(); }
00301 
00302 <span class="keyword">private</span>:
<a name="l00303"></a><a class="code" href="class_f_i_x_1_1_field_map.html#o0">00303</a>   <a class="code" href="class_f_i_x_1_1_field_map.html#s0">Fields</a> <a class="code" href="class_f_i_x_1_1_field_map.html#o0">m_fields</a>;
<a name="l00304"></a><a class="code" href="class_f_i_x_1_1_field_map.html#o1">00304</a>   <a class="code" href="class_f_i_x_1_1_field_map.html#s1">Groups</a> <a class="code" href="class_f_i_x_1_1_field_map.html#o1">m_groups</a>;
00305 };
00307 }
00308 
<a name="l00309"></a><a class="code" href="_field_map_8h.html#a0">00309</a> <span class="preprocessor">#define FIELD_SET( MAP, FIELD )               \</span>
00310 <span class="preprocessor">bool isSet( const FIELD&amp; field ) const      \</span>
00311 <span class="preprocessor">{ return (MAP).isSetField(field); }       \</span>
00312 <span class="preprocessor">void set( const FIELD&amp; field )              \</span>
00313 <span class="preprocessor">{ (MAP).setField(field); }                \</span>
00314 <span class="preprocessor">FIELD&amp; get( FIELD&amp; field ) const            \</span>
00315 <span class="preprocessor">{ return (FIELD&amp;)(MAP).getField(field); }</span>
00316 <span class="preprocessor"></span>
00317 <span class="preprocessor">#endif //FIX_FIELDMAP</span>
00318 <span class="preprocessor"></span>
</pre></div><hr><address><small>

Generated on Wed Oct 30 21:17:52 2002 for QuickFIX by <a href="http://www.doxygen.org/index.html">

<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>

</a> 1.2.17 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,

 &copy;&nbsp;1997-2001</small></address>

</body>

</html>

