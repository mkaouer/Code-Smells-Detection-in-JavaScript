--- ../src_base/minecraft_server/net/minecraft/src/SaveOldDir.java	0000-00-00 00:00:00.000000000 -0000
+++ ../src_work/minecraft_server/net/minecraft/src/SaveOldDir.java	0000-00-00 00:00:00.000000000 -0000
@@ -12,22 +12,15 @@
 
     public IChunkLoader getChunkLoader(WorldProvider worldprovider)
     {
-        File file = getWorldDirectory();
-        if (worldprovider instanceof WorldProviderHell)
+        if (worldprovider.getSaveFolder() != null)
         {
-            File file1 = new File(file, "DIM-1");
-            file1.mkdirs();
-            return new ThreadedChunkLoader(file1);
-        }
-        if (worldprovider instanceof WorldProviderEnd)
-        {
-            File file2 = new File(file, "DIM1");
-            file2.mkdirs();
-            return new ThreadedChunkLoader(file2);
+            File dir = new File(getWorldDirectory(), worldprovider.getSaveFolder());
+            dir.mkdirs();
+            return new ThreadedChunkLoader(dir);
         }
         else
         {
-            return new ThreadedChunkLoader(file);
+            return new ThreadedChunkLoader(getWorldDirectory());
         }
     }
 
